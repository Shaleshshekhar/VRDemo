<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Open Gift ğŸ</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

</head>
<body>

  <!-- Splash screen -->
  <div id="splash">
    <h1>ğŸ Open Your Gift in VR</h1>
    <button id="openBtn">Open Gift</button>
  </div>

  <!-- Loader -->
  <div id="loader" style="display: none;">
    <div class="spinner"></div>
    Loading Dice...
  </div>

  <!-- Background audio -->
  <audio id="bgMusic" loop preload="auto">
    <source src="bgmusic.mp3" type="audio/mpeg" />
  </audio>

  <!-- 3D Viewer -->
  <model-viewer
    id="giftViewer"
    src="https://dl.dropboxusercontent.com/scl/fi/rx30087i68e6h9ohg0c2a/Dice_world_animation_VR_Export_GLTF.glb?rlkey=ezhbftw0pj3mp0hmsv5mh0ip1&st=amcp4ucd"
    alt="3D Gift"
    camera-controls
    autoplay
    ar
    ar-modes="webxr scene-viewer quick-look"
    xr-environment
    shadow-intensity="1"
    exposure="1"
    environment-image="neutral"
  >
    <button slot="ar-button" class="ar-button">Enter VR</button>
  </model-viewer>

  <script>
    const splash = document.getElementById('splash');
    const viewer = document.getElementById('giftViewer');
    const openBtn = document.getElementById('openBtn');
    const bgMusic = document.getElementById('bgMusic');
    const loader = document.getElementById('loader');

    openBtn.addEventListener('click', () => {
      // Play music
      bgMusic.play().catch(err => console.log('ğŸµ Audio blocked:', err));

      // Hide splash
      splash.style.opacity = 0;
      setTimeout(() => splash.style.display = 'none', 1000);

      // Show loader
      loader.style.display = 'flex';

      // Show viewer (will still load in background)
      viewer.style.display = 'block';
    });

    viewer.addEventListener('poster-dismissed', () => {
      // fallback if poster used
      loader.style.display = 'none';
    });

    viewer.addEventListener('model-visibility', (e) => {
      if (e.detail.visible) {
        loader.style.display = 'none';
      }
    });
  </script>
</body>
</html>
